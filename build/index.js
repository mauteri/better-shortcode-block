(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.primitives,r=(0,t.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(o.Path,{d:"M16 4.2v1.5h2.5v12.5H16v1.5h4V4.2h-4zM4.2 19.8h4v-1.5H5.8V5.8h2.5V4.2h-4l-.1 15.6zm5.1-3.1l1.4.6 4-10-1.4-.6-4 10z"})),n=window.wp.hooks,s=window.wp.i18n,a=window.wp.blockEditor,c=window.wp.components,l=window.wp.compose,i=function({icon:e,size:o=24,...r}){return(0,t.cloneElement)(e,{width:o,height:o,...r})},d=window.wp.data,m=window.wp.apiFetch;var u=e.n(m);const p=window.wp.shortcode;function h({setAttributes:e,attributes:o,registeredShortcodes:r}){function n(t){const r=(n=o.text,s=t.index,a=t.index+t.content.length,c=(0,p.string)(t.shortcode),n.substring(0,s)+c+n.substring(a));var n,s,a,c;e({text:r})}function l(e,t,o){t.shortcode.set(o,e),n(t)}return(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(c.Panel,null,function(e=""){const t=[];return[...e.matchAll(/\[([a-z][a-z\d_-]*)[^\]|\[]*]/g)].map((o=>{r.includes(o[1])&&t.push(function(e,t,o){const r=(0,p.next)(e,t,o),n=new RegExp(`\\[${e}([^\\]]+)?`,"gi");let s=[...r.content.matchAll(n)].map((e=>e[1]))[0];return s=s.replace(/\/$/,""),void 0!==s&&(r.shortcode.attrs=function(e){const t={},o=[];let r;const n=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g;for(e=e.replace(/[\u00a0\u200b]/g," ");r=n.exec(e);)r[1]?t[r[1].toLowerCase()]=r[2]:r[3]?t[r[3].toLowerCase()]=r[4]:r[5]?t[r[5].toLowerCase()]=r[6]:r[7]?o.push(r[7]):r[8]&&o.push(r[8]);return{named:t,numeric:o}}(s)),r}(o[1],e,o.index))})),t}(o.text).map(((e,o)=>function(e,o){return(0,t.createElement)(c.PanelBody,{key:"panel_"+o,title:e.shortcode.tag.toUpperCase(),initialOpen:!1},(0,t.createElement)(t.Fragment,null,"{}"===JSON.stringify(e.shortcode.attrs.named)&&(0,t.createElement)(c.__experimentalText,{adjustLineHeightForInnerControls:!0},(0,s.__)("Shortcode has no attributes.","better-shortcode-block")),Object.keys(e.shortcode.attrs.named).map(((r,n)=>(0,t.createElement)(c.TextControl,{label:r,key:o+"_"+r+"_"+n,value:e.shortcode.attrs.named[r],onChange:t=>l(t,e,r)}))),e.shortcode.attrs.numeric.map(((r,n)=>(0,t.createElement)(c.TextControl,{label:(0,s.__)("property","better-shortcode-block")+" "+n,key:o+"_property_"+n,value:r,onChange:t=>l(t,e,n)}))),e.shortcode.content&&(0,t.createElement)(c.TextareaControl,{label:(0,s.__)("content","better-shortcode-block"),value:e.shortcode.content,onChange:t=>function(e,t){t.shortcode.content=e,n(t)}(t,e)})))}(e,o)))))}function b({attributes:e,setAttributes:n}){const m=`blocks-shortcode-input-${(0,l.useInstanceId)(b)}`,[p,w]=(0,t.useState)(""),[g,_]=(0,t.useState)([]),f=(0,d.useSelect)((e=>["\n\t\t\thtml,body,:root {\n\t\t\t\tmargin: 0 !important;\n\t\t\t\tpadding: 0 !important;\n\t\t\t\toverflow: visible !important;\n\t\t\t\tmin-height: auto !important;\n\t\t\t}\n\t\t",...(0,a.transformStyles)(e(a.store).getSettings().styles)]),[]);return(0,t.useEffect)((()=>{u()({path:`/better-shortcode-block/shortcode?shortcode=${encodeURIComponent(e.text)}`}).then((e=>{e.success&&(_(e.registered),w(e.rendered))}))}),[e.text]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.View,(0,a.useBlockProps)({className:"block-library-shortcode__edit"}),(0,t.createElement)(a.BlockControls,null,(0,t.createElement)(c.ToolbarGroup,null,(0,t.createElement)(c.ToolbarButton,{className:"components-tab-button",isPressed:!e.preview,onClick:function(){n({preview:!1})}},(0,s.__)("Raw")),(0,t.createElement)(c.ToolbarButton,{className:"components-tab-button",isPressed:e.preview,onClick:function(){n({preview:!0})}},(0,s.__)("Preview")))),e.preview?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.SandBox,{html:p,styles:f}),(0,t.createElement)("div",{style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0"}})):(0,t.createElement)("div",{className:"components-placeholder",style:{minHeight:"auto"}},(0,t.createElement)("label",{htmlFor:m,className:"components-placeholder__label"},(0,t.createElement)(i,{icon:r}),(0,s.__)("Better Shortcode","better-shortcode-block")),(0,t.createElement)(a.PlainText,{className:"blocks-shortcode__textarea",id:m,value:e.text,"aria-label":(0,s.__)("Shortcode text","better-shortcode-block"),placeholder:(0,s.__)("Write shortcode hereâ€¦","better-shortcode-block"),onChange:e=>n({text:e})}))),(0,t.createElement)(h,{setAttributes:n,attributes:e,registeredShortcodes:g}))}function w({attributes:e}){return(0,t.createElement)(t.RawHTML,null,e.text)}const g=window.wp.autop,_={from:[{type:"shortcode",tag:"[a-z][a-z0-9_-]*",attributes:{text:{type:"string",shortcode:(e,{content:t})=>(0,g.removep)((0,g.autop)(t))}},priority:20}]},f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"core/shortcode","title":"Better Shortcode","category":"widgets","description":"Insert additional custom elements with a WordPress shortcode.","textdomain":"better-shortcode-block","attributes":{"text":{"type":"string","source":"html"},"preview":{"type":"boolean","default":false}},"supports":{"className":false,"customClassName":false,"html":false},"editorScript":"file:./build/index.js"}');(0,n.addFilter)("blocks.registerBlockType","better-shortcode-block/replace-block",(function(e,t){return"core/shortcode"===t?{...f,icon:r,transforms:_,edit:b,save:w}:e}))})();