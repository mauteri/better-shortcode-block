!function(){"use strict";var e={n:function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,{a:o}),o},d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,o=window.wp.primitives,n=(0,t.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(o.Path,{d:"M16 4.2v1.5h2.5v12.5H16v1.5h4V4.2h-4zM4.2 19.8h4v-1.5H5.8V5.8h2.5V4.2h-4l-.1 15.6zm5.1-3.1l1.4.6 4-10-1.4-.6-4 10z"})),r=window.wp.blocks,s=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,c=window.wp.compose,i=function(e){let{icon:o,size:n=24,...r}=e;return(0,t.cloneElement)(o,{width:n,height:n,...r})},u=window.wp.data,d=window.wp.apiFetch,m=e.n(d),p=window.wp.shortcode;function h(e){let{setAttributes:o,attributes:n}=e;function r(e,t){const o=(0,p.next)(e,t),n=new RegExp(`\\[${e}([^\\]]+)?`,"gi"),r=[...o.content.matchAll(n)].map((e=>e[1]))[0];return void 0!==r&&(o.shortcode.attrs=function(e){let t,o={},n=[];const r=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g;for(e=e.replace(/[\u00a0\u200b]/g," ");t=r.exec(e);)t[1]?o[t[1].toLowerCase()]=t[2]:t[3]?o[t[3].toLowerCase()]=t[4]:t[5]?o[t[5].toLowerCase()]=t[6]:t[7]?n.push(t[7]):t[8]&&n.push(t[8]);return{named:o,numeric:n}}(r)),o}function c(e){const t=(r=n.text,s=e.index,a=e.index+e.content.length,l=(0,p.string)(e.shortcode),r.substring(0,s)+l+r.substring(a));var r,s,a,l;o({text:t})}function i(e,t,o){t.shortcode.set(o,e),c(t)}return(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(l.Panel,null,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=[],o=/\[([^\/]\S[^\]|\s]*)(?=.*])/g,n=[...e.matchAll(o)].map((e=>e[1]));return n.map((o=>{t.push(r(o,e))})),t}(n.text).map(((e,o)=>function(e,o){return(0,t.createElement)(l.PanelBody,{key:"panel_"+o,title:e.shortcode.tag.toUpperCase(),initialOpen:!1},(0,t.createElement)(t.Fragment,null,"{}"===JSON.stringify(e.shortcode.attrs.named)&&(0,t.createElement)(l.__experimentalText,{adjustLineHeightForInnerControls:!0},(0,s.__)("Shortcode has no attributes.")),Object.keys(e.shortcode.attrs.named).map(((n,r)=>(0,t.createElement)(l.TextControl,{label:n,key:o+"_"+n+"_"+r,value:e.shortcode.attrs.named[n],onChange:t=>i(t,e,n)}))),e.shortcode.attrs.numeric.map(((n,r)=>(0,t.createElement)(l.TextControl,{label:(0,s.__)("property")+" "+r,key:o+"_property_"+r,value:n,onChange:t=>i(t,e,r)}))),e.shortcode.content&&(0,t.createElement)(l.TextareaControl,{label:(0,s.__)("content"),value:e.shortcode.content,onChange:t=>function(e,t){t.shortcode.content=e,c(t)}(t,e)})))}(e,o)))))}var w=window.wp.autop,b={from:[{type:"shortcode",tag:"[a-z][a-z0-9_-]*",attributes:{text:{type:"string",shortcode:(e,t)=>{let{content:o}=t;return(0,w.removep)((0,w.autop)(o))}}},priority:20}]},f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"better/shortcode","title":"Better Shortcode","category":"widgets","description":"Insert additional custom elements with a WordPress shortcode.","textdomain":"default","attributes":{"text":{"type":"string","source":"html"},"preview":{"type":"boolean","default":false}},"supports":{"className":false,"customClassName":false,"html":false},"editorStyle":"wp-block-shortcode-editor","editorScript":"file:./assets/build/index.js"}');const{name:g}=f,_={icon:n,transforms:b,edit:function e(r){let{attributes:d,setAttributes:p}=r;const w=`blocks-shortcode-input-${(0,c.useInstanceId)(e)}`,[b,f]=(0,t.useState)(""),g=(0,u.useSelect)((e=>["\n\t\t\thtml,body,:root {\n\t\t\t\tmargin: 0 !important;\n\t\t\t\tpadding: 0 !important;\n\t\t\t\toverflow: visible !important;\n\t\t\t\tmin-height: auto !important;\n\t\t\t}\n\t\t",...(0,a.transformStyles)(e(a.store).getSettings().styles)]),[]);return(0,t.useEffect)((()=>{m()({path:`/better-shortcode-block/render-shortcode?shortcode=${encodeURIComponent(d.text)}`}).then((e=>{e.success&&f(e.rendered)}))}),[d.text]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.View,(0,a.useBlockProps)({className:"block-library-shortcode__edit"}),(0,t.createElement)(a.BlockControls,null,(0,t.createElement)(l.ToolbarGroup,null,(0,t.createElement)(l.ToolbarButton,{className:"components-tab-button",isPressed:!d.preview,onClick:function(){p({preview:!1})}},(0,s.__)("Raw")),(0,t.createElement)(l.ToolbarButton,{className:"components-tab-button",isPressed:d.preview,onClick:function(){p({preview:!0})}},(0,s.__)("Preview")))),d.preview?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.SandBox,{html:b,styles:g}),(0,t.createElement)("div",{style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0"}})):(0,t.createElement)("div",{className:"components-placeholder",style:{minHeight:"auto"}},(0,t.createElement)("label",{htmlFor:w,className:"components-placeholder__label"},(0,t.createElement)(i,{icon:n}),(0,s.__)("Better Shortcode")),(0,t.createElement)(a.PlainText,{className:"blocks-shortcode__textarea",id:w,value:d.text,"aria-label":(0,s.__)("Shortcode text"),placeholder:(0,s.__)("Write shortcode hereâ€¦"),onChange:e=>p({text:e})}))),(0,t.createElement)(h,{setAttributes:p,attributes:d}))},save:function(e){let{attributes:o}=e;return(0,t.createElement)(t.RawHTML,null,o.text)}};(0,r.registerBlockType)(g,_)}();